{"version":3,"file":"mfazones-main.js?v=5f1c095cbca85338b3a2","mappings":"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","sources":["webpack://mfazones/./src/Checks/MfaVerifiedValue.vue?fef6","webpack:///mfazones/node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack:///mfazones/src/Checks/MfaVerifiedValue.vue","webpack:///mfazones/src/main.js"],"sourcesContent":["import { render, staticRenderFns } from \"./MfaVerifiedValue.vue?vue&type=template&id=9a6e6fe0&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent(\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */,\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options =\n    typeof scriptExports === 'function' ? scriptExports.options : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) {\n    // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n          injectStyles.call(\n            this,\n            (options.functional ? this.parent : this).$root.$options.shadowRoot\n          )\n        }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div')\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright Copyright (c) 2024 Michiel de Jong <michiel@unhosted.org>\n *\n * @author Michiel de Jong <michiel@unhosted.org>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n\nimport MfaVerifiedValue from './Checks/MfaVerifiedValue'\n\nconsole.log('mfazones js being executed!');\n\nconst appId = 'mfazones'\n\n// copied from https://github.com/nextcloud/flow_webhooks/blob/d06203fa3cc6a5dc83b6f08ab7dd82d61585d334/src/main.js#L27\n\nconsole.log('registering our MfaVerified check');\nwindow.OCA.WorkflowEngine.registerCheck({\n    class: 'OCA\\\\mfazones\\\\Check\\\\MfaVerified',\n    name: t(appId, 'multi-factor authentication'),\n    operators: [\n        { operator: 'is', name: t(appId, 'is verified') },\n        { operator: '!is', name: t(appId, 'is not verified') },\n    ],\n    component: MfaVerifiedValue,\n});\n\n // SPDX-FileCopyrightText: Pondersource <michiel@pondersource.com>\n// SPDX-License-Identifier: AGPL-3.0-or-later\nvar mfazoneFileListPlugin = {\n    attach: function(fileList) {\n      // console.log('FILELIST>>>>>>', fileList);\n      // if (fileList.id === 'trashbin' || fileList.id === 'files.public') {\n      //   return;\n      // }\n      console.log(\"Attaching MFA Zone plugin to \" + fileList.id);\n      console.log(fileList);\n      fileList.registerTabView(new OCA.mfazones.MfaZoneTabView());\n\n      fileList.fileActions.registerAction({\n        name: 'mfa',\n        displayName: 'MFA Zone',\n        type: 1,\n        mime: 'all',\n        permissions: OC.PERMISSION_NONE,\n        iconClass: 'icon-category-security',\n        actionHandler: function(fileName, context) {\n          const statusUrl = OC.generateUrl('/apps/mfazones/getMfaStatus');\n          $.ajax({\n            type: 'GET',\n            url: statusUrl,\n            dataType: 'json',\n            async: true,\n            success: function (response) {\n              if (response.error){\n                  console.log(response.error);\n                  return;\n              }\n              if (response.mfa_passed !== true) {\n                const choice = confirm('This folder requires Multi Factor Authentication. Do you want to enable it for your account?')\n                if (choice) {\n                  window.location.href = OC.generateUrl('/settings/user/security');\n                }\n              } else {\n                alert('You have already enabled Multi Factor Authentication for your account.');\n              }\n            }\n          });\n        },\n        // fileName: 'asdf',\n      });\n\n      const originalSetFiles = fileList.setFiles;\n      fileList.setFiles = (\n        function(filesArray) {\n          // You can find the setFiles function here: https://github.com/nextcloud/server/blob/master/apps/files/js/filelist.js\n          // console.log('FILES ARRAY 2>>>>>>', filesArray)\n          filesArray.forEach((file) => {\n            console.log('seeing', file.name);\n            if (file.name === 'asdf') {\n              console.log('registering');\n              }\n            });\n    \n          originalSetFiles.bind(fileList)(filesArray);\n          console.log(\"gathering ids\");\n          let ids = [];\n          document.getElementsByTagName('tr').forEach((tr) => {\n            if ((typeof tr.getAttribute('data-id') === 'string') && (typeof parseInt(tr.getAttribute('data-id')) === 'number')) {\n              ids.push(tr.getAttribute('data-id'));\n            }\n          });\n        }\n      ).bind(fileList)\n\n      fileList._getWebdavProperties = (function() {\n        // TODO Figure this out! https://github.com/nextcloud/server/blob/371aa1bc5d1c5a5be55ac8e9e812817a68a0cc23/core/src/files/client.js#L505-L512\n        return ([].concat(this.filesClient.getPropfindProperties()))//.concat(['DAV:', 'PonderSource']);\n      }).bind(fileList)\n    }\n};\nOC.Plugins.register('OCA.Files.FileList', mfazoneFileListPlugin);\n\n\n// SPDX-FileCopyrightText: Pondersource <michiel@pondersource.com>\n// SPDX-License-Identifier: AGPL-3.0-or-later\n(function () {\n\tfunction renderHTML(enabled) {\n\t\treturn `\n\t\t\t<div style=\"text-align:center; word-wrap:break-word;\">\n\t\t\t\t<style>\n\t\t\t\t\t.switch {\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\tdisplay: inline;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.switch input { \n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\twidth: 0;\n\t\t\t\t\t\theight: 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.slider {\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\tright: 0;\n\t\t\t\t\t\tbottom: 0;\n\t\t\t\t\t\twidth: 30px;\n\t\t\t\t\t\theight: 15px;\n\t\t\t\t\t\tbackground-color: #ccc;\n\t\t\t\t\t\t-webkit-transition: .4s;\n\t\t\t\t\t\ttransition: .4s;\n\t\t\t\t\t\tmargin-top: auto;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.slider:before {\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tcontent: \"\";\n\t\t\t\t\t\theight: 9px;\n\t\t\t\t\t\twidth: 9px;\n\t\t\t\t\t\tleft: 3px;\n\t\t\t\t\t\tbottom: 3px;\n\t\t\t\t\t\tbackground-color: white;\n\t\t\t\t\t\t-webkit-transition: .4s;\n\t\t\t\t\t\ttransition: .4s;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tinput:checked + .slider {\n\t\t\t\t\t\tbackground-color: #2196F3;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tinput:focus + .slider {\n\t\t\t\t\t\tbox-shadow: 0 0 1px #2196F3;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tinput:checked + .slider:before {\n\t\t\t\t\t\t-webkit-transform: translateX(15px);\n\t\t\t\t\t\t-ms-transform: translateX(15px);\n\t\t\t\t\t\ttransform: translateX(15px);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t/* Rounded sliders */\n\t\t\t\t\t.slider.round {\n\t\t\t\t\t\tborder-radius: 15px;\n\t\t\t\t\t}\n\t\t\t\t\t \n\t\t\t\t\t.slider.round:before {\n\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t\t<span id=\"mfa-current-file-path\" hidden></span>\n\t\t\t\t <span style=\"--icon-size:36px;\">\n\t\t\t\t\t <label class=\"switch\">\n\t\t\t\t\t\t <input id=\"checkbox-radio-switch-mfa\" type=\"checkbox\" ${enabled ? '' : 'disabled'}>\n\t\t\t\t\t\t <span class=\"slider round\"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enforce MFA requirement\n\t\t\t\t\t </label>\n\t\t\t\t </span>\n\t\t\t\t <br/>\n\t\t\t\t <br/>\n\t\t\t\t <br/>\n\t\t\t\t <div id=\"need-mfa\" style=\"--icon-size:36px;\">\n\t\t\t\t\t <label for=\"enable-2fa-button\">You need to login with two factor authentication to use this feature.</label><br><br>\n\t\t\t\t\t <button id=\"enable-2fa-button\">Enable 2FA</button>\n\t\t\t\t </div>\n\t\t\t</div>\n\t\t`;\n\t}\n\tconst MfaZoneTabView = OCA.Files.DetailTabView.extend({\n\t\tid: 'mfazoneTabView',\n\t\tclassName: 'tab mfazoneTabView',\n\t\tgetLabel: function () {\n\t\t\treturn 'MFA Zone';\n\t\t},\n\t\tgetIcon: function () {\n\t\t\treturn 'icon-category-security';\n\t\t},\n\t\trender: function () {\n\t\t\tconst fileInfo = this.getFileInfo();\n\t\t\tif (!fileInfo) {\n\t\t\t\tconsole.error(\"File info not found!\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconsole.log(\"Rendering MFA Zone tab for \" + fileInfo.getFullPath());\n\t\t\t// if (!fileInfo.isDirectory()) {\n\t\t\t// \tthis.$el.html(`<div>MFA Zones are currently disabled for files.</div>`);\n\t\t\t// \tconsole.log(\"Not a directory, MFA zone detail tab disabled.\");\n\t\t\t// \treturn;\n\t\t\t// }\n\t\t\tconst accessUrl = OC.generateUrl('/apps/mfazones/access'),\n\t\t\t\tdata = {\n\t\t\t\t\tsource: fileInfo.getFullPath()\n\t\t\t\t},\n\t\t\t\t_self = this;\n\t\t\t\t_fullPath = fileInfo.getFullPath();\n\t\t\t$.ajax({\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: accessUrl,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: data,\n\t\t\t\tasync: true,\n\t\t\t\tsuccess: function (response) {\n\t\t\t\t\tconsole.log(response);\n\t\t\t\t\t_self.addHtml(_self, data, response.access);\n\t\t\t\t},\n\t\t\t\terror: function (xhr, ajaxOptions, thrownError) {\n\t\t\t\t\tconsole.log(xhr.status);\n\t\t\t\t\tconsole.log(thrownError);\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\taddHtml: function (context, data, enabled) {\n\t\t\tcontext.$el.html(renderHTML(enabled));\n\t\t\tconst statusUrl = OC.generateUrl('/apps/mfazones/get');\n\t\t\t$.ajax({\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: statusUrl,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: data,\n\t\t\t\tasync: true,\n\t\t\t\tsuccess: function (response) {\n\t\t\t\t    if (response.error){\n\t\t\t\t\t    console.log(response.error);\n\t\t\t\t\t    return;\n\t\t\t\t\t}\n\t\t\t\t\tself.document.getElementById('checkbox-radio-switch-mfa')\n\t\t\t\t\t\t.checked = response.status;\n\t\t\t\t\tif (response.mfa_passed){\n\t\t\t\t\t\tcontext.$el.find('#need-mfa').hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontext.$el.find('#enable-2fa-button')\n\t\t\t\t\t\t\t.click(context.showDialog);\n\t\t\t\t\t}\n\t\t\t\t\tif (enabled) {\n\t\t\t\t\t\tcontext.$el.find('#checkbox-radio-switch-mfa')\n\t\t\t\t\t\t\t.click(context.boxChecked);\n\t\t\t\t\t}\n\t\t\t\t\tself.document.getElementById('mfa-current-file-path')\n\t\t\t\t\t.textContent = _fullPath;\n\t\t\t\t},\n\t\t\t\terror: function (xhr, textStatus, thrownError) {\n\t\t\t\t\tconsole.log(xhr.status);\n\t\t\t\t\tconsole.log(textStatus);\n\t\t\t\t\tconsole.log(thrownError);\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tshowDialog: function () {\n\t\t\tif (confirm('You must enable two factor authentication to use MFAZone app. Do you want to enable 2FA?')) {\n\t\t\t\twindow.location.href = OC.generateUrl('/settings/user/security');\n\t\t\t}\n\t\t},\n\t\tboxChecked: function () {\n\t\t\tconst checkBox = this;\n\t\t\tconst setUrl = OC.generateUrl('/apps/mfazones/set'),\n\t\t\tdata = {\n\t\t\t\tsource: self.document.getElementById('mfa-current-file-path')\n\t\t\t\t.textContent,\n\t\t\t\tprotect: checkBox.checked\n\t\t\t};\n\t\t\t$.ajax({\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: setUrl,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: data,\n\t\t\t\tasync: true,\n\t\t\t\tsuccess: function (response) {\n\t\t\t\t\tif (checkBox.checked === true) {\n\t\t\t\t\t\t// self.document.getElementById('mfa-check-status')\n\t\t\t\t\t\t// \t.textContent = \"Protected\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// self.document.getElementById('mfa-check-status')\n\t\t\t\t\t\t// \t.textContent = \"Not Protected\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function (xhr, ajaxOptions, thrownError) {\n\t\t\t\t\tconsole.log(xhr.status);\n\t\t\t\t\tconsole.log(thrownError);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t});\n\tOCA.mfazones = OCA.mfazones || {};\n\tOCA.mfazones.MfaZoneTabView = MfaZoneTabView;\n})();\n"],"names":["component","scriptExports","render","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","options","_compiled","functional","_scopeId","context","this","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","call","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","_injectStyles","originalRender","h","existing","beforeCreate","concat","exports","_c","_self","console","log","appId","window","OCA","WorkflowEngine","registerCheck","class","name","t","operators","operator","MfaVerifiedValue","mfazoneFileListPlugin","attach","fileList","id","registerTabView","mfazones","MfaZoneTabView","fileActions","registerAction","displayName","type","mime","permissions","OC","PERMISSION_NONE","iconClass","actionHandler","fileName","statusUrl","generateUrl","$","ajax","url","dataType","async","success","response","error","mfa_passed","confirm","location","href","alert","originalSetFiles","setFiles","filesArray","forEach","file","bind","ids","document","getElementsByTagName","tr","getAttribute","parseInt","push","_getWebdavProperties","filesClient","getPropfindProperties","Plugins","register","Files","DetailTabView","extend","className","getLabel","getIcon","fileInfo","getFileInfo","getFullPath","accessUrl","data","source","_fullPath","addHtml","access","xhr","ajaxOptions","thrownError","status","enabled","$el","html","renderHTML","self","getElementById","checked","find","hide","click","showDialog","boxChecked","textContent","textStatus","checkBox","setUrl","protect"],"sourceRoot":""}